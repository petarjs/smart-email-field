!function(e,t){"use strict";function o(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}function i(e,t,o){return e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o,!1)}function a(e,t){e.insertBefore(t,e.firstChild)}function n(e){return e.which>=8&&e.which<=48||e.which>=91&&e.which<=145}function r(e){return 32===e.which}function c(e){return 8===e.which}function l(e){return 46===e.which}function s(e){return 39===e.which}function m(e,i){if(this.el=e instanceof Element?e:t.querySelector(e),!this.el)throw Error("No elements match the selector");return this._defaults=u,this._name=h,this._selector=e,o(this._defaults,i),this.init(),this.el.SmartEmailField=this,this}var h="SmartEmailField",d=["gmail.com","att.net","comcast.net","facebook.com","gmail.com","gmx.com","googlemail.com","google.com","hotmail.com","hotmail.co.uk","mac.com","me.com","mail.com","msn.com","live.com","sbcglobal.net","verizon.net","yahoo.com","yahoo.co.uk","aol.com","email.com","games.com","gmx.net","hush.com","hushmail.com","icloud.com","inbox.com","lavabit.com","love.com","outlook.com","pobox.com","rocketmail.com","safe-mail.net","wow.com","ygm.com","ymail.com","zoho.com","fastmail.fm","yandex.com","bellsouth.net","charter.net","comcast.net","cox.net","earthlink.net","juno.com","btinternet.com","virginmedia.com","blueyonder.co.uk","freeserve.co.uk","live.co.uk","ntlworld.com","o2.co.uk","orange.net","sky.com","talktalk.co.uk","tiscali.co.uk","virgin.net","wanadoo.co.uk","bt.com","sina.com","qq.com","naver.com","hanmail.net","daum.net","nate.com","yahoo.co.jp","yahoo.co.kr","yahoo.co.id","yahoo.co.in","yahoo.com.sg","yahoo.com.ph","hotmail.fr","live.fr","laposte.net","yahoo.fr","wanadoo.fr","orange.fr","gmx.fr","sfr.fr","neuf.fr","free.fr","gmx.de","hotmail.de","live.de","online.de","t-online.de","web.de","yahoo.de","mail.ru","rambler.ru","yandex.ru","ya.ru","list.ru","hotmail.be","live.be","skynet.be","voo.be","tvcablenet.be","telenet.be","hotmail.com.ar","live.com.ar","yahoo.com.ar","fibertel.com.ar","speedy.com.ar","arnet.com.ar","hotmail.com","yahoo.com.mx","live.com.mx","yahoo.com","hotmail.es","live.com","hotmail.com.mx","prodigy.net.mx","msn.com"],u={emailDomains:d};m.prototype.addStyle=function(e){var o=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),o.appendChild(i)},m.prototype.wrap=function(e,t){t.length||(t=[t]);for(var o=t.length-1;o>=0;o--){var i=o>0?e.cloneNode(!0):e,a=t[o],n=a.parentNode,r=a.nextSibling;i.appendChild(a),r?n.insertBefore(i,r):n.appendChild(i)}},m.prototype.getElementCss=function(t){var o=e.getComputedStyle(t,"");if(!o.cssText){for(var i="",a=0;a<o.length;a++)i+=o[a]+":"+o.getPropertyValue(o[a])+";";return i}return o.cssText},m.prototype.getShadowField=function(e){var i=this.getElementCss(e);this.addStyle(".sef-wrapper--"+e.getAttribute("id")+" .sef-shadow {"+i+"}"),e.style.background="transparent";var a=t.createElement("div");a.classList.add("sef-shadow");var n={position:"absolute",top:0,left:0,right:0,bottom:0,"-webkit-text-fill-color":"unset"},r=this._defaults.shadowStyle||{opacity:.3};return n=o(n,r),Object.assign(a.style,n),a},m.prototype.getWrapperElement=function(e){var o=t.createElement("div");return o.classList.add("sef-wrapper"),o.classList.add("sef-wrapper--"+e.getAttribute("id")),Object.assign(o.style,{display:"inline-block",position:"relative",overflow:"hidden"}),o},m.prototype._updateShadowText=function(e){var t=this;(!n(e)||l(e)||c(e)||r(e)||s(e))&&setTimeout(function(){var o=e.target.value;if(t.el.scrollWidth>t.el.clientWidth)return void(t.shadow.innerText=t.shadow.textContent="");if(r(e)&&(o+=" "),s(e))return void(t.el.value=t.shadow.innerText||t.shadow.textContent);var i="",a=o.indexOf("@");if(-1!==a){for(var n=o.substring(a+1),c="",l=0;l<d.length&&!c;l++)d[l]&&0===d[l].indexOf(n)&&(c=d[l]);c&&(i=c.substring(n.length)),t.shadow.innerText=t.shadow.textContent=o+i}else t.shadow.innerText=t.shadow.textContent=""},0)},m.prototype.init=function(){Object.assign(this.el.style,{zIndex:1,position:"relative"}),this.wrapper=this.getWrapperElement(this.el),this.wrap(this.wrapper,this.el),this.shadow=this.getShadowField(this.el),a(this.wrapper,this.shadow),i(this.el,"keydown",this._updateShadowText.bind(this))},m.prototype.setEmailDomains=function(e){this._defaults.emailDomains=e},e.SmartEmailField=m}(window,document);